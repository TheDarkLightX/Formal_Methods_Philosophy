<svg
  class="fp-diagram"
  viewBox="0 0 960 370"
  role="img"
  aria-labelledby="fp-scr-title fp-scr-desc"
  xmlns="http://www.w3.org/2000/svg"
>
  <title id="fp-scr-title">Scramble transformation preserving invariants</title>
  <desc id="fp-scr-desc">
    The word "reading" is scrambled to "raednig" while preserving
    first letter, last letter, length, and letter multiset.
  </desc>

  <defs>
    <filter id="fp-scr-shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#0F172A" flood-opacity="0.08" />
    </filter>
    <marker id="fp-arrow-scr" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#3B82F6" fill-opacity="0.9" />
    </marker>
  </defs>

  <!-- ─── Original word card ─── -->
  <g filter="url(#fp-scr-shadow)">
    <rect x="30" y="30" width="380" height="140" rx="22" fill="#FFFFFF" stroke="#E2E8F0" />
    <text x="56" y="66" font-size="14" font-weight="900" fill="#1E293B"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">Original word</text>

    <!-- r (anchor) -->
    <rect x="56"  y="84" width="40" height="46" rx="10"
          fill="rgba(59,130,246,0.14)" stroke="rgba(59,130,246,0.40)" />
    <text x="68"  y="115" font-size="22" font-weight="700" fill="#3B82F6"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">r</text>
    <!-- e -->
    <rect x="104" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="116" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">e</text>
    <!-- a -->
    <rect x="152" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="164" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">a</text>
    <!-- d -->
    <rect x="200" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="212" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">d</text>
    <!-- i -->
    <rect x="248" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="263" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">i</text>
    <!-- n -->
    <rect x="296" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="308" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">n</text>
    <!-- g (anchor) -->
    <rect x="344" y="84" width="40" height="46" rx="10"
          fill="rgba(59,130,246,0.14)" stroke="rgba(59,130,246,0.40)" />
    <text x="356" y="115" font-size="22" font-weight="700" fill="#3B82F6"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">g</text>

    <text x="56" y="152" font-size="11" fill="#475569"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">
      Blue = anchored boundary · Orange = shuffled interior
    </text>
  </g>

  <!-- ─── Arrow ─── -->
  <line x1="430" y1="100" x2="530" y2="100"
        stroke="#3B82F6" stroke-width="3.5" marker-end="url(#fp-arrow-scr)" stroke-linecap="round" />
  <text x="458" y="86" font-size="15" font-weight="900" fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif">T(w)</text>
  <text x="452" y="124" font-size="11" fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif">scramble</text>

  <!-- ─── Scrambled word card ─── -->
  <g filter="url(#fp-scr-shadow)">
    <rect x="550" y="30" width="380" height="140" rx="22" fill="#FFFFFF" stroke="#E2E8F0" />
    <text x="576" y="66" font-size="14" font-weight="900" fill="#1E293B"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">Scrambled word</text>

    <!-- r (anchor) -->
    <rect x="576" y="84" width="40" height="46" rx="10"
          fill="rgba(59,130,246,0.14)" stroke="rgba(59,130,246,0.40)" />
    <text x="588" y="115" font-size="22" font-weight="700" fill="#3B82F6"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">r</text>
    <!-- a (was e) -->
    <rect x="624" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="636" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">a</text>
    <!-- e (was a) -->
    <rect x="672" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="684" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">e</text>
    <!-- d -->
    <rect x="720" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="732" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">d</text>
    <!-- n (was i) -->
    <rect x="768" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="780" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">n</text>
    <!-- i (was n) -->
    <rect x="816" y="84" width="40" height="46" rx="10"
          fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
    <text x="831" y="115" font-size="22" font-weight="700" fill="#D97706"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">i</text>
    <!-- g (anchor) -->
    <rect x="864" y="84" width="40" height="46" rx="10"
          fill="rgba(59,130,246,0.14)" stroke="rgba(59,130,246,0.40)" />
    <text x="876" y="115" font-size="22" font-weight="700" fill="#3B82F6"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">g</text>

    <text x="576" y="152" font-size="11" fill="#475569"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">
      Same letters, same boundaries, different interior order
    </text>
  </g>

  <!-- ─── Invariant-check strip ─── -->
  <g filter="url(#fp-scr-shadow)">
    <rect x="30" y="210" width="900" height="110" rx="22" fill="#FFFFFF" stroke="#E2E8F0" />
    <text x="56" y="246" font-size="14" font-weight="900" fill="#1E293B"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">Invariant checks</text>

    <!-- I1 pill -->
    <rect x="56"  y="260" width="250" height="38" rx="12"
          fill="rgba(59,130,246,0.07)" stroke="rgba(59,130,246,0.18)" />
    <text x="72" y="284" font-size="13" font-weight="700" fill="#1E293B"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">I1  len = 7 = 7  ✓</text>

    <!-- I2 pill -->
    <rect x="330" y="260" width="280" height="38" rx="12"
          fill="rgba(59,130,246,0.07)" stroke="rgba(59,130,246,0.18)" />
    <text x="346" y="284" font-size="13" font-weight="700" fill="#1E293B"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">I2  first = r, last = g  ✓</text>

    <!-- I3 pill -->
    <rect x="634" y="260" width="280" height="38" rx="12"
          fill="rgba(59,130,246,0.07)" stroke="rgba(59,130,246,0.18)" />
    <text x="650" y="284" font-size="13" font-weight="700" fill="#1E293B"
          font-family="Atkinson Hyperlegible, system-ui, sans-serif">I3  bag = {a,d,e,g,i,n,r}  ✓</text>
  </g>

  <!-- ─── Legend ─── -->
  <rect x="56" y="340" width="14" height="14" rx="3"
        fill="rgba(59,130,246,0.14)" stroke="rgba(59,130,246,0.40)" />
  <text x="78" y="352" font-size="11" fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif">Fixed boundary letter</text>

  <rect x="230" y="340" width="14" height="14" rx="3"
        fill="rgba(249,115,22,0.10)" stroke="rgba(249,115,22,0.26)" />
  <text x="252" y="352" font-size="11" fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif">Shuffled interior letter</text>
</svg>
