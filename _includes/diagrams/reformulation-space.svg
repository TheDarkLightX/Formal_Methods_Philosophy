<svg
  class="fp-diagram"
  viewBox="0 0 960 520"
  role="img"
  aria-labelledby="fp-rs-title fp-rs-desc"
  xmlns="http://www.w3.org/2000/svg"
>
  <title id="fp-rs-title">Reformulation space: representations and translations</title>
  <desc id="fp-rs-desc">
    A diagram showing one question translated into different representations (linear algebra, SAT/SMT,
    graphs), each unlocking a different mature toolchain. The meaning of the question stays fixed while
    the representation changes.
  </desc>

  <defs>
    <filter id="fp-rs-shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow
        dx="0"
        dy="10"
        stdDeviation="12"
        flood-color="#0F172A"
        flood-opacity="0.10"
      />
    </filter>
    <marker
      id="fp-rs-arrow"
      markerWidth="12"
      markerHeight="12"
      refX="10"
      refY="6"
      orient="auto"
    >
      <path d="M0,0 L12,6 L0,12 Z" fill="#3B82F6" fill-opacity="0.9" />
    </marker>
  </defs>

  <rect x="0" y="0" width="960" height="520" rx="28" fill="transparent" />

  <g filter="url(#fp-rs-shadow)">
    <rect x="40" y="60" width="880" height="400" rx="26" fill="#FFFFFF" stroke="#E2E8F0" />

    <text
      x="80"
      y="118"
      font-size="16"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Reformulation space
    </text>
    <text
      x="80"
      y="144"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Keep the meaning fixed, change the representation, and use the best tools available in that
      representation.
    </text>

    <!-- Source node -->
    <g>
      <rect
        x="90"
        y="210"
        width="250"
        height="140"
        rx="22"
        fill="rgba(59, 130, 246, 0.10)"
        stroke="rgba(59, 130, 246, 0.22)"
      />
      <text
        x="120"
        y="252"
        font-size="14"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        One question
      </text>
      <text
        x="120"
        y="276"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        “Does a solution exist?”
      </text>
      <text
        x="120"
        y="298"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        “Is there a counterexample?”
      </text>
      <text
        x="120"
        y="320"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        “Is this always true?”
      </text>
    </g>

    <!-- Target representations -->
    <g>
      <rect
        x="420"
        y="150"
        width="270"
        height="96"
        rx="20"
        fill="rgba(15, 23, 42, 0.06)"
        stroke="rgba(15, 23, 42, 0.14)"
      />
      <text
        x="450"
        y="188"
        font-size="14"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        Linear algebra
      </text>
      <text
        x="450"
        y="212"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        vectors, matrices, GF(2)
      </text>

      <rect
        x="720"
        y="160"
        width="170"
        height="76"
        rx="18"
        fill="rgba(59, 130, 246, 0.08)"
        stroke="rgba(59, 130, 246, 0.18)"
      />
      <text
        x="740"
        y="194"
        font-size="12"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        Toolchain
      </text>
      <text
        x="740"
        y="216"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        elimination
      </text>
    </g>

    <g>
      <rect
        x="420"
        y="262"
        width="270"
        height="96"
        rx="20"
        fill="rgba(15, 23, 42, 0.06)"
        stroke="rgba(15, 23, 42, 0.14)"
      />
      <text
        x="450"
        y="300"
        font-size="14"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        SAT / SMT
      </text>
      <text
        x="450"
        y="324"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        Boolean formulas, constraints
      </text>

      <rect
        x="720"
        y="272"
        width="170"
        height="76"
        rx="18"
        fill="rgba(59, 130, 246, 0.08)"
        stroke="rgba(59, 130, 246, 0.18)"
      />
      <text
        x="740"
        y="306"
        font-size="12"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        Toolchain
      </text>
      <text
        x="740"
        y="328"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        SAT solver
      </text>
    </g>

    <g>
      <rect
        x="420"
        y="374"
        width="270"
        height="96"
        rx="20"
        fill="rgba(15, 23, 42, 0.06)"
        stroke="rgba(15, 23, 42, 0.14)"
      />
      <text
        x="450"
        y="412"
        font-size="14"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        Graphs
      </text>
      <text
        x="450"
        y="436"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        nodes, edges, reachability
      </text>

      <rect
        x="720"
        y="384"
        width="170"
        height="76"
        rx="18"
        fill="rgba(59, 130, 246, 0.08)"
        stroke="rgba(59, 130, 246, 0.18)"
      />
      <text
        x="740"
        y="418"
        font-size="12"
        font-weight="900"
        fill="#1E293B"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        Toolchain
      </text>
      <text
        x="740"
        y="440"
        font-size="12"
        fill="#475569"
        font-family="Atkinson Hyperlegible, system-ui, sans-serif"
      >
        DFS / BFS
      </text>
    </g>

    <!-- arrows from source to targets -->
    <path
      d="M340 240 C 380 240, 380 200, 420 198"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-rs-arrow)"
      stroke-linecap="round"
    />
    <path
      d="M340 280 C 380 280, 380 310, 420 310"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-rs-arrow)"
      stroke-linecap="round"
    />
    <path
      d="M340 320 C 380 320, 380 420, 420 422"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-rs-arrow)"
      stroke-linecap="round"
    />

    <text
      x="360"
      y="210"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      translate
    </text>
    <text
      x="360"
      y="304"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      translate
    </text>
    <text
      x="360"
      y="410"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      translate
    </text>

    <!-- Legend -->
    <rect
      x="90"
      y="378"
      width="250"
      height="92"
      rx="18"
      fill="rgba(15, 23, 42, 0.04)"
      stroke="rgba(15, 23, 42, 0.12)"
    />
    <text
      x="110"
      y="410"
      font-size="12"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Translation types
    </text>
    <text
      x="110"
      y="432"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      isomorphism: lossless
    </text>
    <text
      x="110"
      y="452"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      abstraction: property-preserving
    </text>
  </g>
</svg>

