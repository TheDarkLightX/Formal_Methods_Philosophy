<svg
  class="fp-diagram"
  viewBox="0 0 960 420"
  role="img"
  aria-labelledby="fp-tsr-title fp-tsr-desc"
  xmlns="http://www.w3.org/2000/svg"
>
  <title id="fp-tsr-title">Structure versus randomness decomposition</title>
  <desc id="fp-tsr-desc">
    A single complicated object is decomposed into a structured part and a pseudorandom part. Each part
    is handled by a different toolchain, then the results are recombined to prove a property.
  </desc>

  <defs>
    <filter id="fp-tsr-shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="12" flood-color="#0F172A" flood-opacity="0.10" />
    </filter>
    <marker
      id="fp-tsr-arrow"
      markerWidth="12"
      markerHeight="12"
      refX="10"
      refY="6"
      orient="auto"
    >
      <path d="M0,0 L12,6 L0,12 Z" fill="#3B82F6" fill-opacity="0.9" />
    </marker>
  </defs>

  <rect x="0" y="0" width="960" height="420" rx="28" fill="transparent" />

  <g filter="url(#fp-tsr-shadow)">
    <rect x="40" y="60" width="880" height="300" rx="26" fill="#FFFFFF" stroke="#E2E8F0" />

    <text
      x="90"
      y="118"
      font-size="16"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      One hard object, two easier lenses
    </text>
    <text
      x="90"
      y="144"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Choose a decomposition so each part becomes legible to a mature toolchain.
    </text>

    <!-- Left: original object -->
    <rect
      x="90"
      y="190"
      width="220"
      height="130"
      rx="22"
      fill="rgba(15, 23, 42, 0.06)"
      stroke="rgba(15, 23, 42, 0.14)"
    />
    <text
      x="116"
      y="232"
      font-size="14"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Object f
    </text>
    <text
      x="116"
      y="256"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      a set, a function,
    </text>
    <text
      x="116"
      y="278"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      a distribution
    </text>

    <!-- Split node -->
    <rect
      x="350"
      y="220"
      width="120"
      height="90"
      rx="18"
      fill="rgba(59, 130, 246, 0.10)"
      stroke="rgba(59, 130, 246, 0.22)"
    />
    <text
      x="376"
      y="256"
      font-size="13"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Split
    </text>
    <text
      x="376"
      y="278"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      f = fₛ + fᵤ
    </text>

    <!-- Structured part -->
    <rect
      x="510"
      y="170"
      width="190"
      height="78"
      rx="20"
      fill="rgba(59, 130, 246, 0.10)"
      stroke="rgba(59, 130, 246, 0.22)"
    />
    <text
      x="534"
      y="204"
      font-size="13"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Structured part
    </text>
    <text
      x="534"
      y="226"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      compact description
    </text>

    <rect
      x="510"
      y="254"
      width="190"
      height="66"
      rx="18"
      fill="rgba(15, 23, 42, 0.04)"
      stroke="rgba(15, 23, 42, 0.12)"
    />
    <text
      x="534"
      y="282"
      font-size="12"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Tools
    </text>
    <text
      x="534"
      y="304"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      algebra, decomposition
    </text>

    <!-- Random part -->
    <rect
      x="720"
      y="170"
      width="190"
      height="78"
      rx="20"
      fill="rgba(15, 23, 42, 0.06)"
      stroke="rgba(15, 23, 42, 0.14)"
    />
    <text
      x="744"
      y="204"
      font-size="13"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Random part
    </text>
    <text
      x="744"
      y="226"
      font-size="12"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      small correlations
    </text>

    <rect
      x="720"
      y="254"
      width="190"
      height="66"
      rx="18"
      fill="rgba(15, 23, 42, 0.04)"
      stroke="rgba(15, 23, 42, 0.12)"
    />
    <text
      x="744"
      y="282"
      font-size="12"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Tools
    </text>
    <text
      x="744"
      y="304"
      font-size="11"
      fill="#475569"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      bounds, orthogonality
    </text>

    <!-- Combine -->
    <rect
      x="650"
      y="330"
      width="260"
      height="56"
      rx="18"
      fill="rgba(59, 130, 246, 0.08)"
      stroke="rgba(59, 130, 246, 0.18)"
    />
    <text
      x="674"
      y="362"
      font-size="12"
      font-weight="900"
      fill="#1E293B"
      font-family="Atkinson Hyperlegible, system-ui, sans-serif"
    >
      Combine bounds, prove property
    </text>

    <!-- Arrows -->
    <path
      d="M310 255 H342"
      stroke="#3B82F6"
      stroke-width="4"
      marker-end="url(#fp-tsr-arrow)"
      stroke-linecap="round"
    />
    <path
      d="M470 245 C 500 235, 500 210, 510 209"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-tsr-arrow)"
      stroke-linecap="round"
    />
    <path
      d="M470 275 C 560 300, 650 255, 720 209"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-tsr-arrow)"
      stroke-linecap="round"
    />
    <path
      d="M605 320 C 610 338, 650 346, 700 350"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-tsr-arrow)"
      stroke-linecap="round"
    />
    <path
      d="M815 320 C 820 338, 840 346, 860 350"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-tsr-arrow)"
      stroke-linecap="round"
    />
  </g>
</svg>
