<svg
  class="fp-diagram"
  viewBox="0 0 960 420"
  role="img"
  aria-labelledby="fp-cegis-title fp-cegis-desc"
  xmlns="http://www.w3.org/2000/svg"
>
  <title id="fp-cegis-title">Counterexample-guided synthesis loop</title>
  <desc id="fp-cegis-desc">
    Propose a candidate, verify it, analyze the counterexample, refine, and repeat.
  </desc>

  <defs>
    <filter id="fp-shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="12" flood-color="#0F172A" flood-opacity="0.10" />
    </filter>
    <marker
      id="fp-arrow-cegis"
      markerWidth="12"
      markerHeight="12"
      refX="10"
      refY="6"
      orient="auto"
    >
      <path d="M0,0 L12,6 L0,12 Z" fill="#3B82F6" fill-opacity="0.9" />
    </marker>
  </defs>

  <g filter="url(#fp-shadow)">
    <rect x="70" y="80" width="820" height="260" rx="26" fill="#FFFFFF" stroke="#E2E8F0" />

    <!-- nodes -->
    <g>
      <rect x="120" y="140" width="160" height="80" rx="18" fill="rgba(59, 130, 246, 0.10)" stroke="rgba(59, 130, 246, 0.22)" />
      <text x="140" y="178" font-size="14" font-weight="900" fill="#1E293B" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        Propose
      </text>
      <text x="140" y="202" font-size="12" fill="#475569" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        candidate C
      </text>
    </g>

    <g>
      <rect x="330" y="140" width="160" height="80" rx="18" fill="rgba(15, 23, 42, 0.06)" stroke="rgba(15, 23, 42, 0.14)" />
      <text x="350" y="178" font-size="14" font-weight="900" fill="#1E293B" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        Verify
      </text>
      <text x="350" y="202" font-size="12" fill="#475569" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        check spec
      </text>
    </g>

    <g>
      <rect x="540" y="140" width="160" height="80" rx="18" fill="rgba(249, 115, 22, 0.10)" stroke="rgba(249, 115, 22, 0.24)" />
      <text x="560" y="178" font-size="14" font-weight="900" fill="#1E293B" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        Refute
      </text>
      <text x="560" y="202" font-size="12" fill="#475569" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        counterexample
      </text>
    </g>

    <g>
      <rect x="750" y="140" width="160" height="80" rx="18" fill="rgba(59, 130, 246, 0.10)" stroke="rgba(59, 130, 246, 0.22)" />
      <text x="770" y="178" font-size="14" font-weight="900" fill="#1E293B" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        Refine
      </text>
      <text x="770" y="202" font-size="12" fill="#475569" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
        update C
      </text>
    </g>

    <!-- arrows -->
    <path d="M280 180 H320" stroke="#3B82F6" stroke-width="4" marker-end="url(#fp-arrow-cegis)" stroke-linecap="round" />
    <path d="M490 180 H530" stroke="#3B82F6" stroke-width="4" marker-end="url(#fp-arrow-cegis)" stroke-linecap="round" />
    <path d="M700 180 H740" stroke="#3B82F6" stroke-width="4" marker-end="url(#fp-arrow-cegis)" stroke-linecap="round" />

    <!-- loop back -->
    <path
      d="M830 230 C 830 290, 200 290, 200 230"
      stroke="#3B82F6"
      stroke-width="4"
      fill="none"
      marker-end="url(#fp-arrow-cegis)"
      stroke-linecap="round"
      opacity="0.9"
    />
    <text x="450" y="320" font-size="12" fill="#475569" font-family="Atkinson Hyperlegible, system-ui, sans-serif">
      Each refuter becomes a new constraint.
    </text>
  </g>
</svg>

